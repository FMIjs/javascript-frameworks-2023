{"ast":null,"code":"import { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../shared/underline.directive\";\nconst _c0 = function (a1) {\n  return [\".\", a1];\n};\nfunction ListComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 1);\n    i0.ɵɵlistener(\"click\", function ListComponent_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const user_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectUserHandler(user_r1));\n    });\n    i0.ɵɵelementStart(1, \"a\", 2);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"appUnderline\", user_r1.id === (ctx_r0.selectedUser == null ? null : ctx_r0.selectedUser.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, user_r1.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r1.name, \" \");\n  }\n}\nexport class ListComponent {\n  constructor(userService, route) {\n    this.userService = userService;\n    this.route = route;\n    this.selectedUser = null;\n    this.users = [];\n    this.route.queryParams.pipe(switchMap(qp => {\n      const filter = qp['filter'] || undefined;\n      return this.userService.loadUsers(filter);\n    })).subscribe(users => {\n      this.users = users;\n    });\n  }\n  newUserHandler(name) {\n    this.users.push({\n      name\n    });\n  }\n  selectUserHandler(user) {\n    if (this.selectedUser?.id === user?.id) {\n      return void (this.selectedUser = null);\n    }\n    this.selectedUser = user;\n  }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"appUnderline\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"appUnderline\", \"click\"], [3, \"routerLink\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ul\");\n      i0.ɵɵtemplate(1, ListComponent_li_1_Template, 3, 5, \"li\", 0);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.users);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.UnderlineDirective, i2.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsaXN0LmNvbXBvbmVudC5zY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci9saXN0L2xpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLGdLQUFnSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAGA,SAASA,SAAS,QAAQ,gBAAgB;;;;;;;;;;;;ICFxCC,EAAA,CAAAC,cAAA,YAA+G;IAAhFD,EAAA,CAAAE,UAAA,mBAAAC,gDAAA;MAAA,MAAAC,WAAA,GAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,OAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAT,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAW,WAAA,CAAAF,MAAA,CAAAG,iBAAA,CAAAL,OAAA,CAAuB;IAAA,EAAC;IAC9DP,EAAA,CAAAC,cAAA,WAAiC;IAC/BD,EAAA,CAAAa,MAAA,GACF;IAAAb,EAAA,CAAAc,YAAA,EAAI;;;;;IAH2Dd,EAAA,CAAAe,UAAA,iBAAAR,OAAA,CAAAS,EAAA,MAAAC,MAAA,CAAAC,YAAA,kBAAAD,MAAA,CAAAC,YAAA,CAAAF,EAAA,EAA6C;IACzGhB,EAAA,CAAAmB,SAAA,GAA6B;IAA7BnB,EAAA,CAAAe,UAAA,eAAAf,EAAA,CAAAoB,eAAA,IAAAC,GAAA,EAAAd,OAAA,CAAAS,EAAA,EAA6B;IAC9BhB,EAAA,CAAAmB,SAAA,GACF;IADEnB,EAAA,CAAAsB,kBAAA,MAAAf,OAAA,CAAAgB,IAAA,MACF;;;ADQJ,OAAM,MAAOC,aAAa;EAIxBC,YAAoBC,WAAwB,EAAUC,KAAqB;IAAvD,KAAAD,WAAW,GAAXA,WAAW;IAAuB,KAAAC,KAAK,GAALA,KAAK;IAH3D,KAAAT,YAAY,GAAe,IAAI;IAC/B,KAAAU,KAAK,GAAU,EAAE;IAIf,IAAI,CAACD,KAAK,CAACE,WAAW,CAACC,IAAI,CACzB/B,SAAS,CAACgC,EAAE,IAAG;MACb,MAAMC,MAAM,GAAGD,EAAE,CAAC,QAAQ,CAAC,IAAIE,SAAS;MACxC,OAAO,IAAI,CAACP,WAAW,CAACQ,SAAS,CAACF,MAAM,CAAC;IAC3C,CAAC,CAAC,CACH,CAACG,SAAS,CAACP,KAAK,IAAG;MAClB,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,CAAC;EACJ;EAEAQ,cAAcA,CAACb,IAAY;IACzB,IAAI,CAACK,KAAK,CAACS,IAAI,CAAC;MAAEd;IAAI,CAAE,CAAC;EAC3B;EAEAX,iBAAiBA,CAAC0B,IAAS;IACzB,IAAI,IAAI,CAACpB,YAAY,EAAEF,EAAE,KAAKsB,IAAI,EAAEtB,EAAE,EAAE;MACtC,OAAO,MAAM,IAAI,CAACE,YAAY,GAAG,IAAI,CAAC;;IAExC,IAAI,CAACA,YAAY,GAAGoB,IAAI;EAC1B;;AAzBWd,aAAa;mBAAbA,aAAa,EAAAxB,EAAA,CAAAuC,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAzC,EAAA,CAAAuC,iBAAA,CAAAG,EAAA,CAAAC,cAAA;AAAA;AAAbnB,aAAa;QAAbA,aAAa;EAAAoB,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCZ1BlD,EAAA,CAAAC,cAAA,SAAI;MACFD,EAAA,CAAAoD,UAAA,IAAAC,2BAAA,gBAIK;MACPrD,EAAA,CAAAc,YAAA,EAAK;;;MALkBd,EAAA,CAAAmB,SAAA,GAAQ;MAARnB,EAAA,CAAAe,UAAA,YAAAoC,GAAA,CAAAvB,KAAA,CAAQ","names":["switchMap","i0","ɵɵelementStart","ɵɵlistener","ListComponent_li_1_Template_li_click_0_listener","restoredCtx","ɵɵrestoreView","_r3","user_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","selectUserHandler","ɵɵtext","ɵɵelementEnd","ɵɵproperty","id","ctx_r0","selectedUser","ɵɵadvance","ɵɵpureFunction1","_c0","ɵɵtextInterpolate1","name","ListComponent","constructor","userService","route","users","queryParams","pipe","qp","filter","undefined","loadUsers","subscribe","newUserHandler","push","user","ɵɵdirectiveInject","i1","UserService","i2","ActivatedRoute","selectors","decls","vars","consts","template","ListComponent_Template","rf","ctx","ɵɵtemplate","ListComponent_li_1_Template"],"sourceRoot":"","sources":["/Users/alexkostov/dev/fmiJS/javascript-frameworks-2023/week14/lecture/src/app/user/list/list.component.ts","/Users/alexkostov/dev/fmiJS/javascript-frameworks-2023/week14/lecture/src/app/user/list/list.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { switchMap } from 'rxjs/operators';\n\nimport { UserService } from '../user.service';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss'],\n})\nexport class ListComponent {\n  selectedUser: any | null = null;\n  users: any[] = [];\n\n  constructor(private userService: UserService, private route: ActivatedRoute) {\n\n    this.route.queryParams.pipe(\n      switchMap(qp => {\n        const filter = qp['filter'] || undefined;\n        return this.userService.loadUsers(filter)\n      })\n    ).subscribe(users => {\n      this.users = users;\n    });\n  }\n\n  newUserHandler(name: string) {\n    this.users.push({ name });\n  }\n\n  selectUserHandler(user: any): void {\n    if (this.selectedUser?.id === user?.id) {\n      return void (this.selectedUser = null);\n    }\n    this.selectedUser = user;\n  }\n}\n","<ul>\n  <li *ngFor=\"let user of users\" (click)=\"selectUserHandler(user)\" [appUnderline]=\"user.id === selectedUser?.id\">\n    <a [routerLink]=\"['.', user.id]\">\n      {{user.name}}\n    </a>\n  </li>\n</ul>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}